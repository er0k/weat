<!doctype html>
<html lang="en">
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0">
    <meta charset="utf-8" lang="en">
    <title>weather</title>
</head>
<body>

<div id="services"></div>

<div id="weather">
    <h1 id="currentTemp">57.0F</h1>
    <h2 id="current">Mostly Cloudy</h2>
    <img src="https://api.weather.gov/icons/land/day/bkn?size=medium">

    <dl>
        <dt>wind</dt>
        <dd id="wind">From the W at 7.2 MPH</dd>

        <dt>humidity</dt>
        <dd id="humidity">29%</dd>

        <dt>pressure</dt>
        <dd id="pressure">4.75mb</dd>

        <dt>visibility</dt>
        <dd id="visibility">10.0 miles</dd>

        <dt>precipitation</dt>
        <dd id="precipitation">0.00 inches</dd>
    </dl>
</div>

</body>

<script>

const services = [
    { id: 2, name: "Open Weather Map" },
    { id: 3, name: "NOAA" }
];

const showServices = _=> {
    let list = "<ul>\n";
    services.map(service => list += `\t<li><a href="w.php?s=${service.id}">${service.name}</a></li>\n`);
    list += "</ul>\n";
    let servicesDiv = document.getElementById("services")
    servicesDiv.innerHTML = list;
}

showServices();

const getWeather = async serviceNum => {
    let weatherResp = await fetch("w.php?" + serviceNum);
    console.log(weatherResp);
    let contents = await weatherResp.json();
    console.log(contents);
    return contents;
}

</script>

</html>
